<link rel="import" href="elements.html">

<!--
`<uqlibrary-menu>` is a the main menu of the UQL Apps

Example:
    <uqlibrary-menu></uqlibrary-menu>

@demo

@demo demo/index.html Demo of the Full view
-->
<dom-module id="uqlibrary-menu">
  <!-- All element styles -->
  <style is="custom-style" include="iron-flex iron-flex-alignment common-styles">
    :host {
      font-family: var(--font-family);
      font-size: var(--body-font-size);

      height: 100%;
      display: block;
      background-color: #FFF;
      overflow-y: auto;
    }

    /** Top of menu styles */
    .account {
      background: url('../images/top.jpg') 100%;
      background-size: cover;
      border-bottom: 1px solid #CCC;
    }

    .gradient {
      background: -moz-linear-gradient(top,transparent 30%,#000 100%);
      background: -webkit-linear-gradient(top,transparent 30%,#000 100%);
      background: -o-linear-gradient(top,transparent 30%,#000 100%);
      background: -ms-linear-gradient(top,transparent 30%,#000 100%);
      background: linear-gradient(to bottom,transparent 30%,#000 100%);

      @apply(--layout-horizontal-reverse);
      @apply(--layout-end-justified);
    }

    .details {
      padding: 110px 14px 14px 16px;
    }

    .gradient paper-icon-button {
      @apply(--layout-self-end);
      color: #FFF;
      margin-bottom: 8px;
      margin-right: 8px;
      padding: 2px;
    }

    /** Menu item styles */
    paper-menu.menu a {
      @apply(--layout-flex);
      @apply(--layout-horizontal);
      @apply(--layout-center);

      @apply(--menu-item);

      border-top: 1px solid var(--menu-open-background-color);
    }

    paper-menu.menu a .label {
      @apply(--layout-flex);
    }

    paper-menu.menu a.iron-selected {
      font-weight: 500 !important;
    }

    paper-menu.menu iron-icon.icon {
      margin-right: 30px;
    }

    paper-menu.menu a:hover {
      background-color: var(--menu-hover-background-color);
    }

    .divider {
      border-bottom: 1px solid var(--menu-border-color);
    }
  </style>

  <!-- Template -->
  <template>
    <uqlibrary-api-account id="apiAccount"></uqlibrary-api-account>
    <uqlibrary-api-applications id="apiApplications" user="{{user}}"></uqlibrary-api-applications>

    <!-- Top of menu -->
    <template is="dom-if" if="{{_account.hasSession}}">
      <div class="account">
        <div class="gradient">
          <div class="details flex">
            <div class="menu inverse">{{_account.name}}</div>
            <div class="menu inverse">{{_account.mail}}</div>
          </div>
        </div>
      </div>
    </template>

    <!-- Menu -->
    <paper-menu class="menu" attr-for-selected="data-route" selected="[[route]]">
      <template is="dom-repeat" items="[[ applications ]]">
        <!-- Divider -->
        <template is="dom-if" if="[[item.isDivider]]">
          <div class="divider"></div>
        </template>
        <!-- Menu item -->
        <template is="dom-if" if="[[item.isLink]]">
          <!-- External link -->
          <template is="dom-if" if="[[item.isExternal]]">
            <a href="[[item.link]]" aria-label="[[item.description]]" on-tap="_menuItemClicked">
              <iron-icon class="icon" icon="[[item.icon]]"></iron-icon>
              <div class="label">[[item.title]]</div>
            </a>
          </template>
          <!-- Internal link -->
          <template is="dom-if" if="[[!item.isExternal]]">
            <a data-route$="[[item.route]]" href=".[[item.link]]" aria-label="[[item.description]]" on-tap="_menuItemClicked">
              <iron-icon class="icon" icon="[[item.icon]]"></iron-icon>
              <div class="label">[[item.title]]</div>
            </a>
          </template>
        </template>
      </template>
    </paper-menu>
  </template>

  <!-- Location of the script -->
  <script src="uqlibrary-menu.js"></script>
</dom-module>
